{"version":3,"file":"Input.js","names":["isNil","isArray","chunk","map","filter","toPairs","React","useState","useEffect","tinycolor","TextInput","Typography","Swatch","preparePresets","presetColors","presetColumns","v","_ref","_ref2","_slicedToArray","title","value","isValid","toHex","toUpperCase","validateColor","callback","prefix","arguments","length","undefined","Input","_ref3","color","onChange","onPressEnter","_useState","_useState2","inputValue","setInputValue","_useState3","_useState4","isInputFocused","setIsInputFocused","presets","handleInputChange","createElement","Fragment","group","index","className","key","concat","_ref4","_ref5","size","onClick","addonBefore","Text","type","e","target","onFocus","onBlur","defaultProps"],"sources":["../../../src/components/ColorPicker/Input.tsx"],"sourcesContent":["import { isNil, isArray, chunk, map, filter, toPairs } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport tinycolor from \"tinycolor2\";\nimport TextInput from \"antd/lib/input\";\nimport Typography from \"antd/lib/typography\";\nimport Swatch from \"./Swatch\";\n\nimport \"./input.less\";\n\nfunction preparePresets(presetColors: any, presetColumns: any) {\n  presetColors = isArray(presetColors) ? map(presetColors, v => [null, v]) : toPairs(presetColors);\n  presetColors = map(presetColors, ([title, value]) => {\n    if (isNil(value)) {\n      return [title, null];\n    }\n    value = tinycolor(value);\n    if (value.isValid()) {\n      return [title, \"#\" + value.toHex().toUpperCase()];\n    }\n    return null;\n  });\n  return chunk(filter(presetColors), presetColumns);\n}\n\nfunction validateColor(value: any, callback: any, prefix = \"#\") {\n  if (isNil(value)) {\n    callback(null);\n  }\n  value = tinycolor(value);\n  if (value.isValid()) {\n    callback(prefix + value.toHex().toUpperCase());\n  }\n}\n\ntype OwnProps = {\n  color?: string;\n  presetColors?:\n    | string[]\n    | {\n        [key: string]: string;\n      };\n  presetColumns?: number;\n  onChange?: (...args: any[]) => any;\n  onPressEnter?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof Input.defaultProps;\n\nexport default function Input({ color, presetColors, presetColumns, onChange, onPressEnter }: Props) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isInputFocused, setIsInputFocused] = useState(false);\n\n  const presets = preparePresets(presetColors, presetColumns);\n\n  function handleInputChange(value: any) {\n    setInputValue(value);\n    validateColor(value, onChange);\n  }\n\n  useEffect(() => {\n    if (!isInputFocused) {\n      validateColor(color, setInputValue, \"\");\n    }\n  }, [color, isInputFocused]);\n\n  return (\n    <React.Fragment>\n      {map(presets, (group, index) => (\n        <div className=\"color-picker-input-swatches\" key={`preset-row-${index}`}>\n          {map(group, ([title, value]) => (\n            // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n            <Swatch key={value} color={value} title={title} size={30} onClick={() => validateColor(value, onChange)} />\n          ))}\n        </div>\n      ))}\n      <div className=\"color-picker-input\">\n        <TextInput\n          data-test=\"ColorPicker.CustomColor\"\n          addonBefore={<Typography.Text type=\"secondary\">#</Typography.Text>}\n          value={inputValue}\n          onChange={e => handleInputChange(e.target.value)}\n          onFocus={() => setIsInputFocused(true)}\n          onBlur={() => setIsInputFocused(false)}\n          onPressEnter={onPressEnter}\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n\nInput.defaultProps = {\n  color: \"#FFFFFF\",\n  presetColors: null,\n  presetColumns: 8,\n  onChange: () => {},\n  onPressEnter: () => {},\n};\n"],"mappings":"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"}