{"version":3,"file":"json.js","names":["_lodash","require","_react","_interopRequireDefault","_JsonViewInteractive","_visualizationsSettings","obj","__esModule","default","initJsonColumn","column","prepareData","row","text","name","isString","length","visualizationsSettings","tableCellMaxJSONSize","value","JSON","parse","e","undefined","JsonColumn","_ref","_prepareData","isUndefined","createElement","className","friendlyName"],"sources":["../../../../src/visualizations/table/columns/json.tsx"],"sourcesContent":["import { isString, isUndefined } from \"lodash\";\nimport React from \"react\";\nimport JsonViewInteractive from \"@/components/json-view-interactive/JsonViewInteractive\";\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\n\nexport default function initJsonColumn(column: any) {\n  function prepareData(row: any) {\n    const text = row[column.name];\n    if (isString(text) && text.length <= visualizationsSettings.tableCellMaxJSONSize) {\n      try {\n        return { text, value: JSON.parse(text) };\n      } catch (e) {\n        // ignore `JSON.parse` error and return default value\n      }\n    }\n    return { text, value: undefined };\n  }\n\n  function JsonColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text, value } = prepareData(row);\n    if (isUndefined(value)) {\n      return <div className=\"json-cell-invalid\">{\"\" + text}</div>;\n    }\n\n    return (\n      <div className=\"json-cell-valid\">\n        <JsonViewInteractive value={value} />\n      </div>\n    );\n  }\n\n  JsonColumn.prepareData = prepareData;\n\n  return JsonColumn;\n}\n\ninitJsonColumn.friendlyName = \"JSON\";\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,oBAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,uBAAA,GAAAJ,OAAA;AAAiF,SAAAE,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAElE,SAASG,cAAcA,CAACC,MAAW,EAAE;EAClD,SAASC,WAAWA,CAACC,GAAQ,EAAE;IAC7B,IAAMC,IAAI,GAAGD,GAAG,CAACF,MAAM,CAACI,IAAI,CAAC;IAC7B,IAAI,IAAAC,gBAAQ,EAACF,IAAI,CAAC,IAAIA,IAAI,CAACG,MAAM,IAAIC,8CAAsB,CAACC,oBAAoB,EAAE;MAChF,IAAI;QACF,OAAO;UAAEL,IAAI;UAAEM,KAAK,EAAEC,IAAI,CAACC,KAAK,CAACR,IAAI;QAAE,CAAC;MAC1C,CAAC,CAAC,OAAOS,CAAC,EAAE;QACV;MAAA;IAEJ;IACA,OAAO;MAAET,IAAI;MAAEM,KAAK,EAAEI;IAAU,CAAC;EACnC;EAEA,SAASC,UAAUA,CAAAC,IAAA,EAAe;IAAA,IAAZb,GAAG,GAAAa,IAAA,CAAHb,GAAG;IACvB;IACA,IAAAc,YAAA,GAAwBf,WAAW,CAACC,GAAG,CAAC;MAAhCC,IAAI,GAAAa,YAAA,CAAJb,IAAI;MAAEM,KAAK,GAAAO,YAAA,CAALP,KAAK;IACnB,IAAI,IAAAQ,mBAAW,EAACR,KAAK,CAAC,EAAE;MACtB,oBAAOjB,MAAA,CAAAM,OAAA,CAAAoB,aAAA;QAAKC,SAAS,EAAC;MAAmB,GAAE,EAAE,GAAGhB,IAAU,CAAC;IAC7D;IAEA,oBACEX,MAAA,CAAAM,OAAA,CAAAoB,aAAA;MAAKC,SAAS,EAAC;IAAiB,gBAC9B3B,MAAA,CAAAM,OAAA,CAAAoB,aAAA,CAACxB,oBAAA,CAAAI,OAAmB;MAACW,KAAK,EAAEA;IAAM,CAAE,CACjC,CAAC;EAEV;EAEAK,UAAU,CAACb,WAAW,GAAGA,WAAW;EAEpC,OAAOa,UAAU;AACnB;AAEAf,cAAc,CAACqB,YAAY,GAAG,MAAM"}