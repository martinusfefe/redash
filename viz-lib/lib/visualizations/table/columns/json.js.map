{"version":3,"file":"json.js","names":["isString","isUndefined","React","JsonViewInteractive","visualizationsSettings","initJsonColumn","column","prepareData","row","text","name","length","tableCellMaxJSONSize","value","JSON","parse","e","undefined","JsonColumn","_ref","_prepareData","createElement","className","friendlyName"],"sources":["../../../../src/visualizations/table/columns/json.tsx"],"sourcesContent":["import { isString, isUndefined } from \"lodash\";\nimport React from \"react\";\nimport JsonViewInteractive from \"@/components/json-view-interactive/JsonViewInteractive\";\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\n\nexport default function initJsonColumn(column: any) {\n  function prepareData(row: any) {\n    const text = row[column.name];\n    if (isString(text) && text.length <= visualizationsSettings.tableCellMaxJSONSize) {\n      try {\n        return { text, value: JSON.parse(text) };\n      } catch (e) {\n        // ignore `JSON.parse` error and return default value\n      }\n    }\n    return { text, value: undefined };\n  }\n\n  function JsonColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text, value } = prepareData(row);\n    if (isUndefined(value)) {\n      return <div className=\"json-cell-invalid\">{\"\" + text}</div>;\n    }\n\n    return (\n      <div className=\"json-cell-valid\">\n        <JsonViewInteractive value={value} />\n      </div>\n    );\n  }\n\n  JsonColumn.prepareData = prepareData;\n\n  return JsonColumn;\n}\n\ninitJsonColumn.friendlyName = \"JSON\";\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,QAAQ;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,mBAAmB;AAC1B,SAASC,sBAAsB;AAE/B,eAAe,SAASC,cAAcA,CAACC,MAAW,EAAE;EAClD,SAASC,WAAWA,CAACC,GAAQ,EAAE;IAC7B,IAAMC,IAAI,GAAGD,GAAG,CAACF,MAAM,CAACI,IAAI,CAAC;IAC7B,IAAIV,QAAQ,CAACS,IAAI,CAAC,IAAIA,IAAI,CAACE,MAAM,IAAIP,sBAAsB,CAACQ,oBAAoB,EAAE;MAChF,IAAI;QACF,OAAO;UAAEH,IAAI;UAAEI,KAAK,EAAEC,IAAI,CAACC,KAAK,CAACN,IAAI;QAAE,CAAC;MAC1C,CAAC,CAAC,OAAOO,CAAC,EAAE;QACV;MAAA;IAEJ;IACA,OAAO;MAAEP,IAAI;MAAEI,KAAK,EAAEI;IAAU,CAAC;EACnC;EAEA,SAASC,UAAUA,CAAAC,IAAA,EAAe;IAAA,IAAZX,GAAG,GAAAW,IAAA,CAAHX,GAAG;IACvB;IACA,IAAAY,YAAA,GAAwBb,WAAW,CAACC,GAAG,CAAC;MAAhCC,IAAI,GAAAW,YAAA,CAAJX,IAAI;MAAEI,KAAK,GAAAO,YAAA,CAALP,KAAK;IACnB,IAAIZ,WAAW,CAACY,KAAK,CAAC,EAAE;MACtB,oBAAOX,KAAA,CAAAmB,aAAA;QAAKC,SAAS,EAAC;MAAmB,GAAE,EAAE,GAAGb,IAAU,CAAC;IAC7D;IAEA,oBACEP,KAAA,CAAAmB,aAAA;MAAKC,SAAS,EAAC;IAAiB,gBAC9BpB,KAAA,CAAAmB,aAAA,CAAClB,mBAAmB;MAACU,KAAK,EAAEA;IAAM,CAAE,CACjC,CAAC;EAEV;EAEAK,UAAU,CAACX,WAAW,GAAGA,WAAW;EAEpC,OAAOW,UAAU;AACnB;AAEAb,cAAc,CAACkB,YAAY,GAAG,MAAM"}