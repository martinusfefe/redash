{"version":3,"file":"link.js","names":["extend","trim","React","useDebouncedCallback","Section","Input","Checkbox","ContextHelp","formatSimpleTemplate","Editor","_ref","column","onChange","_useDebouncedCallback","_useDebouncedCallback2","_slicedToArray","onChangeDebounced","createElement","Fragment","label","defaultValue","linkUrlTemplate","event","target","value","linkTextTemplate","linkTitleTemplate","checked","linkOpenInNewTab","placement","arrowPointAtCenter","icon","style","cursor","defaultIcon","initLinkColumn","prepareData","row","name","href","title","text","result","LinkColumn","_ref2","_prepareData","props","_objectWithoutProperties","_excluded","friendlyName"],"sources":["../../../../src/visualizations/table/columns/link.tsx"],"sourcesContent":["import { extend, trim } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, Checkbox, ContextHelp } from \"@/components/visualizations/editor\";\nimport { formatSimpleTemplate } from \"@/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    linkUrlTemplate?: string;\n    linkTextTemplate?: string;\n    linkTitleTemplate?: string;\n    linkOpenInNewTab?: boolean;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  const [onChangeDebounced] = useDebouncedCallback(onChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"URL template\"\n          data-test=\"Table.ColumnEditor.Link.UrlTemplate\"\n          defaultValue={column.linkUrlTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkUrlTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Text template\"\n          data-test=\"Table.ColumnEditor.Link.TextTemplate\"\n          defaultValue={column.linkTextTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkTextTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Title template\"\n          data-test=\"Table.ColumnEditor.Link.TitleTemplate\"\n          defaultValue={column.linkTitleTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkTitleTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Table.ColumnEditor.Link.OpenInNewTab\"\n          checked={column.linkOpenInNewTab}\n          onChange={event => onChange({ linkOpenInNewTab: event.target.checked })}>\n          Open in new tab\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n        <ContextHelp\n          placement=\"topLeft\"\n          arrowPointAtCenter\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message\n          icon={<span style={{ cursor: \"default\" }}>Format specs {ContextHelp.defaultIcon}</span>}>\n          <div>\n            All columns can be referenced using <code>{\"{{ column_name }}\"}</code> syntax.\n          </div>\n          <div>\n            Use <code>{\"{{ @ }}\"}</code> to reference current (this) column.\n          </div>\n          <div>This syntax is applicable to URL, Text and Title options.</div>\n        </ContextHelp>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nexport default function initLinkColumn(column: any) {\n  function prepareData(row: any) {\n    row = extend({ \"@\": row[column.name] }, row);\n\n    const href = trim(formatSimpleTemplate(column.linkUrlTemplate, row));\n    if (href === \"\") {\n      return {};\n    }\n\n    const title = trim(formatSimpleTemplate(column.linkTitleTemplate, row));\n    const text = trim(formatSimpleTemplate(column.linkTextTemplate, row));\n\n    const result = {\n      href,\n      text: text !== \"\" ? text : href,\n    };\n\n    if (title !== \"\") {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'title' does not exist on type '{ href: s... Remove this comment to see the full error message\n      result.title = title;\n    }\n    if (column.linkOpenInNewTab) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'target' does not exist on type '{ href: ... Remove this comment to see the full error message\n      result.target = \"_blank\";\n    }\n\n    return result;\n  }\n\n  function LinkColumn({ row }: any) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'text' does not exist on type '{}'.\n    // eslint-disable-line react/prop-types\n    const { text, ...props } = prepareData(row);\n    return <a {...props}>{text}</a>;\n  }\n\n  LinkColumn.prepareData = prepareData;\n\n  return LinkColumn;\n}\n\ninitLinkColumn.friendlyName = \"Link\";\ninitLinkColumn.Editor = Editor;\n"],"mappings":"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"}