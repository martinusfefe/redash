{"version":3,"file":"link.js","names":["_lodash","require","_react","_interopRequireDefault","_useDebounce","_editor","_valueFormat","_excluded","obj","__esModule","default","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","isArray","Editor","_ref","column","onChange","_useDebouncedCallback","useDebouncedCallback","_useDebouncedCallback2","onChangeDebounced","createElement","Fragment","Section","Input","label","defaultValue","linkUrlTemplate","event","linkTextTemplate","linkTitleTemplate","Checkbox","checked","linkOpenInNewTab","ContextHelp","placement","arrowPointAtCenter","icon","style","cursor","defaultIcon","initLinkColumn","prepareData","row","extend","href","trim","formatSimpleTemplate","title","text","result","LinkColumn","_ref2","_prepareData","props","friendlyName"],"sources":["../../../../src/visualizations/table/columns/link.tsx"],"sourcesContent":["import { extend, trim } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, Checkbox, ContextHelp } from \"@/components/visualizations/editor\";\nimport { formatSimpleTemplate } from \"@/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    linkUrlTemplate?: string;\n    linkTextTemplate?: string;\n    linkTitleTemplate?: string;\n    linkOpenInNewTab?: boolean;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  const [onChangeDebounced] = useDebouncedCallback(onChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"URL template\"\n          data-test=\"Table.ColumnEditor.Link.UrlTemplate\"\n          defaultValue={column.linkUrlTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkUrlTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Text template\"\n          data-test=\"Table.ColumnEditor.Link.TextTemplate\"\n          defaultValue={column.linkTextTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkTextTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Title template\"\n          data-test=\"Table.ColumnEditor.Link.TitleTemplate\"\n          defaultValue={column.linkTitleTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkTitleTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Table.ColumnEditor.Link.OpenInNewTab\"\n          checked={column.linkOpenInNewTab}\n          onChange={event => onChange({ linkOpenInNewTab: event.target.checked })}>\n          Open in new tab\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n        <ContextHelp\n          placement=\"topLeft\"\n          arrowPointAtCenter\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message\n          icon={<span style={{ cursor: \"default\" }}>Format specs {ContextHelp.defaultIcon}</span>}>\n          <div>\n            All columns can be referenced using <code>{\"{{ column_name }}\"}</code> syntax.\n          </div>\n          <div>\n            Use <code>{\"{{ @ }}\"}</code> to reference current (this) column.\n          </div>\n          <div>This syntax is applicable to URL, Text and Title options.</div>\n        </ContextHelp>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nexport default function initLinkColumn(column: any) {\n  function prepareData(row: any) {\n    row = extend({ \"@\": row[column.name] }, row);\n\n    const href = trim(formatSimpleTemplate(column.linkUrlTemplate, row));\n    if (href === \"\") {\n      return {};\n    }\n\n    const title = trim(formatSimpleTemplate(column.linkTitleTemplate, row));\n    const text = trim(formatSimpleTemplate(column.linkTextTemplate, row));\n\n    const result = {\n      href,\n      text: text !== \"\" ? text : href,\n    };\n\n    if (title !== \"\") {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'title' does not exist on type '{ href: s... Remove this comment to see the full error message\n      result.title = title;\n    }\n    if (column.linkOpenInNewTab) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'target' does not exist on type '{ href: ... Remove this comment to see the full error message\n      result.target = \"_blank\";\n    }\n\n    return result;\n  }\n\n  function LinkColumn({ row }: any) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'text' does not exist on type '{}'.\n    // eslint-disable-line react/prop-types\n    const { text, ...props } = prepareData(row);\n    return <a {...props}>{text}</a>;\n  }\n\n  LinkColumn.prepareData = prepareData;\n\n  return LinkColumn;\n}\n\ninitLinkColumn.friendlyName = \"Link\";\ninitLinkColumn.Editor = Editor;\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,OAAA,GAAAJ,OAAA;AACA,IAAAK,YAAA,GAAAL,OAAA;AAA0D,IAAAM,SAAA;AAAA,SAAAJ,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,MAAA,EAAAC,QAAA,QAAAD,MAAA,yBAAAE,MAAA,GAAAC,6BAAA,CAAAH,MAAA,EAAAC,QAAA,OAAAG,GAAA,EAAAC,CAAA,MAAAC,MAAA,CAAAC,qBAAA,QAAAC,gBAAA,GAAAF,MAAA,CAAAC,qBAAA,CAAAP,MAAA,QAAAK,CAAA,MAAAA,CAAA,GAAAG,gBAAA,CAAAC,MAAA,EAAAJ,CAAA,MAAAD,GAAA,GAAAI,gBAAA,CAAAH,CAAA,OAAAJ,QAAA,CAAAS,OAAA,CAAAN,GAAA,uBAAAE,MAAA,CAAAK,SAAA,CAAAC,oBAAA,CAAAC,IAAA,CAAAb,MAAA,EAAAI,GAAA,aAAAF,MAAA,CAAAE,GAAA,IAAAJ,MAAA,CAAAI,GAAA,cAAAF,MAAA;AAAA,SAAAC,8BAAAH,MAAA,EAAAC,QAAA,QAAAD,MAAA,yBAAAE,MAAA,WAAAY,UAAA,GAAAR,MAAA,CAAAS,IAAA,CAAAf,MAAA,OAAAI,GAAA,EAAAC,CAAA,OAAAA,CAAA,MAAAA,CAAA,GAAAS,UAAA,CAAAL,MAAA,EAAAJ,CAAA,MAAAD,GAAA,GAAAU,UAAA,CAAAT,CAAA,OAAAJ,QAAA,CAAAS,OAAA,CAAAN,GAAA,kBAAAF,MAAA,CAAAE,GAAA,IAAAJ,MAAA,CAAAI,GAAA,YAAAF,MAAA;AAAA,SAAAc,eAAAC,GAAA,EAAAZ,CAAA,WAAAa,eAAA,CAAAD,GAAA,KAAAE,qBAAA,CAAAF,GAAA,EAAAZ,CAAA,KAAAe,2BAAA,CAAAH,GAAA,EAAAZ,CAAA,KAAAgB,gBAAA;AAAA,SAAAA,iBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAG,CAAA,EAAAC,MAAA,SAAAD,CAAA,qBAAAA,CAAA,sBAAAE,iBAAA,CAAAF,CAAA,EAAAC,MAAA,OAAAE,CAAA,GAAApB,MAAA,CAAAK,SAAA,CAAAgB,QAAA,CAAAd,IAAA,CAAAU,CAAA,EAAAK,KAAA,aAAAF,CAAA,iBAAAH,CAAA,CAAAM,WAAA,EAAAH,CAAA,GAAAH,CAAA,CAAAM,WAAA,CAAAC,IAAA,MAAAJ,CAAA,cAAAA,CAAA,mBAAAK,KAAA,CAAAC,IAAA,CAAAT,CAAA,OAAAG,CAAA,+DAAAO,IAAA,CAAAP,CAAA,UAAAD,iBAAA,CAAAF,CAAA,EAAAC,MAAA;AAAA,SAAAC,kBAAAR,GAAA,EAAAiB,GAAA,QAAAA,GAAA,YAAAA,GAAA,GAAAjB,GAAA,CAAAR,MAAA,EAAAyB,GAAA,GAAAjB,GAAA,CAAAR,MAAA,WAAAJ,CAAA,MAAA8B,IAAA,OAAAJ,KAAA,CAAAG,GAAA,GAAA7B,CAAA,GAAA6B,GAAA,EAAA7B,CAAA,IAAA8B,IAAA,CAAA9B,CAAA,IAAAY,GAAA,CAAAZ,CAAA,UAAA8B,IAAA;AAAA,SAAAhB,sBAAAF,GAAA,EAAAZ,CAAA,QAAA+B,EAAA,WAAAnB,GAAA,gCAAAoB,MAAA,IAAApB,GAAA,CAAAoB,MAAA,CAAAC,QAAA,KAAArB,GAAA,4BAAAmB,EAAA,QAAAG,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,IAAA,OAAAC,EAAA,OAAAC,EAAA,iBAAAJ,EAAA,IAAAL,EAAA,GAAAA,EAAA,CAAAvB,IAAA,CAAAI,GAAA,GAAA6B,IAAA,QAAAzC,CAAA,QAAAC,MAAA,CAAA8B,EAAA,MAAAA,EAAA,UAAAQ,EAAA,uBAAAA,EAAA,IAAAL,EAAA,GAAAE,EAAA,CAAA5B,IAAA,CAAAuB,EAAA,GAAAW,IAAA,MAAAJ,IAAA,CAAAK,IAAA,CAAAT,EAAA,CAAAU,KAAA,GAAAN,IAAA,CAAAlC,MAAA,KAAAJ,CAAA,GAAAuC,EAAA,iBAAAM,GAAA,IAAAL,EAAA,OAAAL,EAAA,GAAAU,GAAA,yBAAAN,EAAA,YAAAR,EAAA,CAAAe,MAAA,KAAAT,EAAA,GAAAN,EAAA,CAAAe,MAAA,IAAA7C,MAAA,CAAAoC,EAAA,MAAAA,EAAA,2BAAAG,EAAA,QAAAL,EAAA,aAAAG,IAAA;AAAA,SAAAzB,gBAAAD,GAAA,QAAAc,KAAA,CAAAqB,OAAA,CAAAnC,GAAA,UAAAA,GAAA;AAa1D,SAASoC,MAAMA,CAAAC,IAAA,EAA8B;EAAA,IAA3BC,MAAM,GAAAD,IAAA,CAANC,MAAM;IAAEC,SAAQ,GAAAF,IAAA,CAARE,QAAQ;EAChC,IAAAC,qBAAA,GAA4B,IAAAC,iCAAoB,EAACF,SAAQ,EAAE,GAAG,CAAC;IAAAG,sBAAA,GAAA3C,cAAA,CAAAyC,qBAAA;IAAxDG,iBAAiB,GAAAD,sBAAA;EAExB,oBACErE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACvE,MAAA,CAAAQ,OAAK,CAACgE,QAAQ,qBAEbxE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAsE,OAAO,qBACNzE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAuE,KAAK;IACJC,KAAK,EAAC,cAAc;IACpB,aAAU,qCAAqC;IAC/CC,YAAY,EAAEX,MAAM,CAACY,eAAgB;IACrCX,QAAQ,EAAGY,KAAU,IAAKR,iBAAiB,CAAC;MAAEO,eAAe,EAAEC,KAAK,CAAClE,MAAM,CAAC+C;IAAM,CAAC;EAAE,CACtF,CACM,CAAC,eAGV3D,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAsE,OAAO,qBACNzE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAuE,KAAK;IACJC,KAAK,EAAC,eAAe;IACrB,aAAU,sCAAsC;IAChDC,YAAY,EAAEX,MAAM,CAACc,gBAAiB;IACtCb,QAAQ,EAAGY,KAAU,IAAKR,iBAAiB,CAAC;MAAES,gBAAgB,EAAED,KAAK,CAAClE,MAAM,CAAC+C;IAAM,CAAC;EAAE,CACvF,CACM,CAAC,eAGV3D,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAsE,OAAO,qBACNzE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAuE,KAAK;IACJC,KAAK,EAAC,gBAAgB;IACtB,aAAU,uCAAuC;IACjDC,YAAY,EAAEX,MAAM,CAACe,iBAAkB;IACvCd,QAAQ,EAAGY,KAAU,IAAKR,iBAAiB,CAAC;MAAEU,iBAAiB,EAAEF,KAAK,CAAClE,MAAM,CAAC+C;IAAM,CAAC;EAAE,CACxF,CACM,CAAC,eAGV3D,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAsE,OAAO,qBACNzE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAA8E,QAAQ;IACP,aAAU,sCAAsC;IAChDC,OAAO,EAAEjB,MAAM,CAACkB,gBAAiB;IACjCjB,QAAQ,EAAEY,KAAK,IAAIZ,SAAQ,CAAC;MAAEiB,gBAAgB,EAAEL,KAAK,CAAClE,MAAM,CAACsE;IAAQ,CAAC;EAAE,GAAC,iBAEjE,CACH,CAAC,eAGVlF,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAsE,OAAO,qBAENzE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,CAACpE,OAAA,CAAAiF,WAAW;IACVC,SAAS,EAAC,SAAS;IACnBC,kBAAkB;IAClB;IAAA;IACAC,IAAI,eAAEvF,MAAA,CAAAQ,OAAA,CAAA+D,aAAA;MAAMiB,KAAK,EAAE;QAAEC,MAAM,EAAE;MAAU;IAAE,GAAC,eAAa,EAACL,mBAAW,CAACM,WAAkB;EAAE,gBACxF1F,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,cAAK,sCACiC,eAAAvE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,eAAO,mBAA0B,CAAC,YACnE,CAAC,eACNvE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,cAAK,MACC,eAAAvE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,eAAO,SAAgB,CAAC,wCACzB,CAAC,eACNvE,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,cAAK,2DAA8D,CACxD,CACN,CACK,CAAC;AAErB;AAEe,SAASoB,cAAcA,CAAC1B,MAAW,EAAE;EAClD,SAAS2B,WAAWA,CAACC,GAAQ,EAAE;IAC7BA,GAAG,GAAG,IAAAC,cAAM,EAAC;MAAE,GAAG,EAAED,GAAG,CAAC5B,MAAM,CAACzB,IAAI;IAAE,CAAC,EAAEqD,GAAG,CAAC;IAE5C,IAAME,IAAI,GAAG,IAAAC,YAAI,EAAC,IAAAC,iCAAoB,EAAChC,MAAM,CAACY,eAAe,EAAEgB,GAAG,CAAC,CAAC;IACpE,IAAIE,IAAI,KAAK,EAAE,EAAE;MACf,OAAO,CAAC,CAAC;IACX;IAEA,IAAMG,KAAK,GAAG,IAAAF,YAAI,EAAC,IAAAC,iCAAoB,EAAChC,MAAM,CAACe,iBAAiB,EAAEa,GAAG,CAAC,CAAC;IACvE,IAAMM,IAAI,GAAG,IAAAH,YAAI,EAAC,IAAAC,iCAAoB,EAAChC,MAAM,CAACc,gBAAgB,EAAEc,GAAG,CAAC,CAAC;IAErE,IAAMO,MAAM,GAAG;MACbL,IAAI;MACJI,IAAI,EAAEA,IAAI,KAAK,EAAE,GAAGA,IAAI,GAAGJ;IAC7B,CAAC;IAED,IAAIG,KAAK,KAAK,EAAE,EAAE;MAChB;MACAE,MAAM,CAACF,KAAK,GAAGA,KAAK;IACtB;IACA,IAAIjC,MAAM,CAACkB,gBAAgB,EAAE;MAC3B;MACAiB,MAAM,CAACxF,MAAM,GAAG,QAAQ;IAC1B;IAEA,OAAOwF,MAAM;EACf;EAEA,SAASC,UAAUA,CAAAC,KAAA,EAAe;IAAA,IAAZT,GAAG,GAAAS,KAAA,CAAHT,GAAG;IACvB;IACA;IACA,IAAAU,YAAA,GAA2BX,WAAW,CAACC,GAAG,CAAC;MAAnCM,IAAI,GAAAI,YAAA,CAAJJ,IAAI;MAAKK,KAAK,GAAA/F,wBAAA,CAAA8F,YAAA,EAAAlG,SAAA;IACtB,oBAAOL,MAAA,CAAAQ,OAAA,CAAA+D,aAAA,MAAOiC,KAAK,EAAGL,IAAQ,CAAC;EACjC;EAEAE,UAAU,CAACT,WAAW,GAAGA,WAAW;EAEpC,OAAOS,UAAU;AACnB;AAEAV,cAAc,CAACc,YAAY,GAAG,MAAM;AACpCd,cAAc,CAAC5B,MAAM,GAAGA,MAAM"}