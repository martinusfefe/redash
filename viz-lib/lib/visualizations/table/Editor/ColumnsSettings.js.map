{"version":3,"file":"ColumnsSettings.js","names":["_lodash","require","_react","_interopRequireDefault","_collapse","_tooltip","_typography","_reactSortableHoc","_sortable","_propTypes","_EyeOutlined","_EyeInvisibleOutlined","_ColumnEditor","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","Text","Typography","SortableItem","sortableElement","Collapse","Panel","ColumnsSettings","_ref","options","onOptionsChange","handleColumnChange","newColumn","event","stopPropagation","columns","map","c","name","handleColumnsReorder","_ref2","oldIndex","newIndex","splice","createElement","SortableContainer","axis","lockAxis","useDragHandle","helperClass","helperContainer","container","firstChild","onSortEnd","containerProps","className","bordered","defaultActiveKey","expandIconPosition","column","index","header","Fragment","DragHandle","concat","title","type","style","marginLeft","extra","mouseEnterDelay","mouseLeaveDelay","visible","onClick","onChange","propTypes","EditorPropTypes"],"sources":["../../../../src/visualizations/table/Editor/ColumnsSettings.tsx"],"sourcesContent":["import { map } from \"lodash\";\nimport React from \"react\";\nimport Collapse from \"antd/lib/collapse\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Typography from \"antd/lib/typography\";\n// @ts-expect-error ts-migrate(2724) FIXME: Module '\"../../../../node_modules/react-sortable-h... Remove this comment to see the full error message\nimport { sortableElement } from \"react-sortable-hoc\";\nimport { SortableContainer, DragHandle } from \"@/components/sortable\";\nimport { EditorPropTypes } from \"@/visualizations/prop-types\";\n\nimport EyeOutlinedIcon from \"@ant-design/icons/EyeOutlined\";\nimport EyeInvisibleOutlinedIcon from \"@ant-design/icons/EyeInvisibleOutlined\";\n\nimport ColumnEditor from \"./ColumnEditor\";\n\nconst { Text } = Typography;\n\nconst SortableItem = sortableElement(Collapse.Panel);\n\nexport default function ColumnsSettings({ options, onOptionsChange }: any) {\n  function handleColumnChange(newColumn: any, event: any) {\n    if (event) {\n      event.stopPropagation();\n    }\n    const columns = map(options.columns, c => (c.name === newColumn.name ? newColumn : c));\n    onOptionsChange({ columns });\n  }\n\n  function handleColumnsReorder({ oldIndex, newIndex }: any) {\n    const columns = [...options.columns];\n    columns.splice(newIndex, 0, ...columns.splice(oldIndex, 1));\n    onOptionsChange({ columns });\n  }\n\n  return (\n    <SortableContainer\n      axis=\"y\"\n      lockAxis=\"y\"\n      useDragHandle\n      helperClass=\"table-editor-columns-dragged-item\"\n      helperContainer={(container: any) => container.firstChild}\n      onSortEnd={handleColumnsReorder}\n      containerProps={{\n        className: \"table-visualization-editor-columns\",\n      }}>\n      {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n      <Collapse bordered={false} defaultActiveKey={[]} expandIconPosition=\"right\">\n        {map(options.columns, (column, index) => (\n          <SortableItem\n            key={column.name}\n            index={index}\n            header={\n              <React.Fragment>\n                <DragHandle />\n                <span data-test={`Table.Column.${column.name}.Name`}>\n                  {column.name}\n                  {column.title !== \"\" && column.title !== column.name && (\n                    <Text type=\"secondary\" style={{ marginLeft: 5 }}>\n                      <i>({column.title})</i>\n                    </Text>\n                  )}\n                </span>\n              </React.Fragment>\n            }\n            extra={\n              <Tooltip title=\"Toggle visibility\" mouseEnterDelay={0} mouseLeaveDelay={0}>\n                {column.visible ? (\n                  <EyeOutlinedIcon\n                    data-test={`Table.Column.${column.name}.Visibility`}\n                    onClick={event => handleColumnChange({ ...column, visible: !column.visible }, event)}\n                  />\n                ) : (\n                  <EyeInvisibleOutlinedIcon\n                    data-test={`Table.Column.${column.name}.Visibility`}\n                    onClick={event => handleColumnChange({ ...column, visible: !column.visible }, event)}\n                  />\n                )}\n              </Tooltip>\n            }>\n            {/* @ts-expect-error ts-migrate(2322) FIXME: Type '(newColumn: any, event: any) => void' is not... Remove this comment to see the full error message */}\n            <ColumnEditor column={column} onChange={handleColumnChange} />\n          </SortableItem>\n        ))}\n      </Collapse>\n    </SortableContainer>\n  );\n}\n\nColumnsSettings.propTypes = EditorPropTypes;\n"],"mappings":"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"}