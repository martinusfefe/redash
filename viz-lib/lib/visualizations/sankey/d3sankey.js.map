{"version":3,"file":"d3sankey.js","names":["_d","_interopRequireDefault","require","obj","__esModule","default","center","node","y","dy","value","link","Sankey","sankey","nodeWidth","nodePadding","size","nodes","links","computeNodeLinks","forEach","sourceLinks","targetLinks","source","target","push","computeNodeValues","Math","max","d3","sum","moveSinksRight","x","length","scaleNodeBreadths","kx","computeNodeBreadths","remainingNodes","nextNodes","assignBreadth","dx","indexOf","n","computeNodeDepths","iterations","nodesByBreadth","nest","key","d","sortKeys","ascending","entries","map","values","initializeNodeDepth","ky","min","i","relaxLeftToRight","alpha","weightedSource","resolveCollisions","y0","sort","ascendingDepth","relaxRightToLeft","slice","reverse","weightedTarget","a","b","computeLinkDepths","ascendingTargetDepth","ascendingSourceDepth","sy","ty","_","arguments","layout","relayout","curvature","x0","x1","xi","interpolateNumber","x2","x3","y1","concat","_default","exports"],"sources":["../../../src/visualizations/sankey/d3sankey.ts"],"sourcesContent":["/* eslint-disable */\n\nimport d3 from \"d3\";\n\nexport interface LinkType {\n  id: number;\n  name: string;\n  color: string;\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n  source: SourceTargetType;\n  target: SourceTargetType;\n}\n\nexport type SourceTargetType = {\n  sourceLinks: Array<LinkType>;\n  targetLinks: Array<LinkType>;\n};\n\nexport type NodeType = LinkType & SourceTargetType;\nexport interface D3SankeyType {\n  nodeWidth: (...args: any[]) => any;\n  nodeHeight: (...args: any[]) => any;\n  nodePadding: (...args: any[]) => any;\n  nodes: (...args: any[]) => any[];\n  link: (...args: any[]) => any;\n  links: (...args: any[]) => any[];\n  size: (...args: any[]) => any;\n  layout: (...args: any[]) => any;\n  relayout: (...args: any[]) => any;\n}\n\nexport type DType = { sy: number; ty: number; value: number; source: LinkType; target: LinkType } & LinkType;\n\nfunction center(node: any) {\n  return node.y + node.dy / 2;\n}\n\nfunction value(link: any) {\n  return link.value;\n}\n\nfunction Sankey(): D3SankeyType {\n  const sankey = {};\n  let nodeWidth = 24;\n  let nodePadding = 8;\n  let size = [1, 1];\n  let nodes: any[] = [];\n  let links: any[] = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(node => {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(link => {\n      let source = link.source;\n      let target = link.target;\n      if (typeof source === \"number\") source = link.source = nodes[link.source];\n      if (typeof target === \"number\") target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(node => {\n      node.value = Math.max(d3.sum(node.sourceLinks, value), d3.sum(node.targetLinks, value));\n    });\n  }\n\n  function moveSinksRight(x: any) {\n    nodes.forEach(node => {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx: any) {\n    nodes.forEach(node => {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes: any;\n    let x = 0;\n\n    function assignBreadth(node: any) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach((link: any) => {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    moveSinksRight(x);\n    x = Math.max(\n      d3.max(nodes, n => n.x),\n      2\n    ); // get new maximum x value (min 2)\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function computeNodeDepths(iterations: any) {\n    const nodesByBreadth = d3\n      // @ts-expect-error\n      .nest()\n      .key((d: any) => d.x)\n      .sortKeys(d3.ascending)\n      .entries(nodes)\n      .map((d: any) => d.values);\n\n    function initializeNodeDepth() {\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      const ky = d3.min(nodesByBreadth, n => (size[1] - (n.length - 1) * nodePadding) / d3.sum(n, value));\n\n      nodesByBreadth.forEach((n: any) => {\n        n.forEach((node: any, i: any) => {\n          node.y = i;\n          // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(link => {\n        // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha: any) {\n      function weightedSource(link: any) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach((n: any) => {\n        n.forEach((node: any) => {\n          if (node.targetLinks.length) {\n            const y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach((nodes: any) => {\n        const n = nodes.length;\n        let node;\n        let dy;\n        let y0 = 0;\n        let i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (let alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft((alpha *= 0.99));\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha: any) {\n      nodesByBreadth\n        .slice()\n        .reverse()\n        .forEach((nodes: any) => {\n          nodes.forEach((node: any) => {\n            if (node.sourceLinks.length) {\n              const y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n      function weightedTarget(link: any) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a: any, b: any) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(node => {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(node => {\n      let sy = 0,\n        ty = 0;\n      node.sourceLinks.forEach((link: any) => {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach((link: any) => {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a: any, b: any) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a: any, b: any) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'nodeWidth' does not exist on type '{}'.\n  sankey.nodeWidth = function(_: any) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'nodePadding' does not exist on type '{}'... Remove this comment to see the full error message\n  sankey.nodePadding = function(_: any) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'nodes' does not exist on type '{}'.\n  sankey.nodes = function(_: any) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'links' does not exist on type '{}'.\n  sankey.links = function(_: any) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'size' does not exist on type '{}'.\n  sankey.size = function(_: any) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'layout' does not exist on type '{}'.\n  sankey.layout = function(iterations: any) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'relayout' does not exist on type '{}'.\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'link' does not exist on type '{}'.\n  sankey.link = function() {\n    let curvature = 0.5;\n\n    function link(d: DType) {\n      const x0 = d.source.x + d.source.dx;\n      const x1 = d.target.x;\n      const xi = d3.interpolateNumber(x0, x1);\n      const x2 = xi(curvature);\n      const x3 = xi(1 - curvature);\n      const y0 = d.source.y + d.sy + d.dy / 2;\n      const y1 = d.target.y + d.ty + d.dy / 2;\n\n      return `M${x0},${y0}C${x2},${y0} ${x3},${y1} ${x1},${y1}`;\n    }\n\n    link.curvature = (_: any) => {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  return sankey as D3SankeyType;\n}\n\nexport default Sankey;\n"],"mappings":"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"}