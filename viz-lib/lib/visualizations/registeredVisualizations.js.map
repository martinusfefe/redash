{"version":3,"file":"registeredVisualizations.js","names":["find","flatten","each","PropTypes","boxPlotVisualization","chartVisualization","choroplethVisualization","cohortVisualization","counterVisualization","detailsVisualization","funnelVisualization","mapVisualization","pivotVisualization","sankeyVisualization","sunburstVisualization","tableVisualization","wordCloudVisualization","VisualizationConfig","shape","type","string","isRequired","name","getOptions","func","isDefault","bool","isDeprecated","Renderer","Editor","autoHeight","defaultRows","number","defaultColumns","minRows","maxRows","minColumns","maxColumns","registeredVisualizations","validateVisualizationConfig","config","typeSpecs","values","checkPropTypes","registerVisualization","_objectSpread","Error","concat","getDefaultVisualization","visualization","newVisualization","arguments","length","undefined","options","description"],"sources":["../../src/visualizations/registeredVisualizations.ts"],"sourcesContent":["import { find, flatten, each } from \"lodash\";\nimport PropTypes from \"prop-types\";\n\nimport boxPlotVisualization from \"./box-plot\";\nimport chartVisualization from \"./chart\";\nimport choroplethVisualization from \"./choropleth\";\nimport cohortVisualization from \"./cohort\";\nimport counterVisualization from \"./counter\";\nimport detailsVisualization from \"./details\";\nimport funnelVisualization from \"./funnel\";\nimport mapVisualization from \"./map\";\nimport pivotVisualization from \"./pivot\";\nimport sankeyVisualization from \"./sankey\";\nimport sunburstVisualization from \"./sunburst\";\nimport tableVisualization from \"./table\";\nimport wordCloudVisualization from \"./word-cloud\";\n\ntype VisualizationConfig = {\n  type: string;\n  name: string;\n  getOptions: (...args: any[]) => any;\n  isDefault?: boolean;\n  isDeprecated?: boolean;\n  Renderer: (...args: any[]) => any;\n  Editor?: (...args: any[]) => any;\n  autoHeight?: boolean;\n  defaultRows?: number;\n  defaultColumns?: number;\n  minRows?: number;\n  maxRows?: number;\n  minColumns?: number;\n  maxColumns?: number;\n};\n\n// @ts-expect-error ts-migrate(2322) FIXME: Type 'Requireable<InferProps<{ type: Validator<str... Remove this comment to see the full error message\nconst VisualizationConfig: PropTypes.Requireable<VisualizationConfig> = PropTypes.shape({\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  getOptions: PropTypes.func.isRequired,\n  isDefault: PropTypes.bool,\n  isDeprecated: PropTypes.bool,\n  Renderer: PropTypes.func.isRequired,\n  Editor: PropTypes.func,\n  // other config options\n  autoHeight: PropTypes.bool,\n  defaultRows: PropTypes.number,\n  defaultColumns: PropTypes.number,\n  minRows: PropTypes.number,\n  maxRows: PropTypes.number,\n  minColumns: PropTypes.number,\n  maxColumns: PropTypes.number,\n});\n\nconst registeredVisualizations = {};\n\nfunction validateVisualizationConfig(config: any) {\n  const typeSpecs = { config: VisualizationConfig };\n  const values = { config };\n  PropTypes.checkPropTypes(typeSpecs, values, \"prop\", \"registerVisualization\");\n}\n\nfunction registerVisualization(config: any) {\n  validateVisualizationConfig(config);\n  config = {\n    Editor: () => null,\n    ...config,\n    isDefault: config.isDefault && !config.isDeprecated,\n  };\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (registeredVisualizations[config.type]) {\n    throw new Error(`Visualization ${config.type} already registered.`);\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  registeredVisualizations[config.type] = config;\n}\n\neach(\n  flatten([\n    boxPlotVisualization,\n    chartVisualization,\n    choroplethVisualization,\n    cohortVisualization,\n    counterVisualization,\n    detailsVisualization,\n    funnelVisualization,\n    mapVisualization,\n    pivotVisualization,\n    sankeyVisualization,\n    sunburstVisualization,\n    tableVisualization,\n    wordCloudVisualization,\n  ]),\n  registerVisualization\n);\n\nexport default registeredVisualizations;\n\nexport function getDefaultVisualization() {\n  // return any visualization explicitly marked as default, or any non-deprecated otherwise\n  return (\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isDefault' does not exist on type 'never... Remove this comment to see the full error message\n    find(registeredVisualizations, visualization => visualization.isDefault) ||\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isDeprecated' does not exist on type 'ne... Remove this comment to see the full error message\n    find(registeredVisualizations, visualization => !visualization.isDeprecated)\n  );\n}\n\nexport function newVisualization(type = null, options = {}) {\n  // @ts-expect-error ts-migrate(2538) FIXME: Type 'null' cannot be used as an index type.\n  const visualization = type ? registeredVisualizations[type] : getDefaultVisualization();\n  return {\n    type: visualization.type,\n    name: visualization.name,\n    description: \"\",\n    options,\n  };\n}\n"],"mappings":"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"}