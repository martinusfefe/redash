{"version":3,"file":"Cornelius.js","names":["_lodash","require","_moment","_interopRequireDefault","_chromaJs","_react","_interopRequireWildcard","_tooltip","_valueFormat","_chooseTextColorForBackground","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","momentInterval","daily","weekly","monthly","yearly","timeLabelFormats","defaultOptions","initialDate","timeInterval","noValuePlaceholder","rawNumberOnHover","displayAbsoluteValues","initialIntervalNumber","maxColumns","Infinity","title","timeColumnTitle","peopleColumnTitle","stageColumnTitle","numberFormat","percentFormat","timeLabelFormat","colors","min","max","steps","prepareOptions","options","extend","moment","formatNumber","createNumberFormatter","formatPercent","getColorForValue","chroma","scale","mode","domain","classes","isLightColor","backgroundColor","white","black","contrast","formatStageTitle","index","formatSimpleTemplate","formatTimeLabel","offset","interval","clone","add","format","CorneliusHeader","_ref","maxRowLength","cells","i","push","createElement","concat","className","CorneliusRow","_ref2","data","baseValue","value","percentageValue","isFinite","cellProps","isNil","children","style","color","chooseTextColorForBackground","mouseEnterDelay","mouseLeaveDelay","Cornelius","_ref3","useMemo","map","d","length","row","defaultProps"],"sources":["../../../src/visualizations/cohort/Cornelius.tsx"],"sourcesContent":["/*!\n * React port of Cornelius library (based on v0.1 released under the MIT license)\n * Original library: http://restorando.github.io/cornelius\n */\n\nimport { isNil, isFinite, map, extend, min, max } from \"lodash\";\nimport moment from \"moment\";\nimport chroma from \"chroma-js\";\nimport React, { useMemo } from \"react\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport { createNumberFormatter, formatSimpleTemplate } from \"@/lib/value-format\";\nimport chooseTextColorForBackground from \"@/lib/chooseTextColorForBackground\";\n\nimport \"./cornelius.less\";\n\nconst momentInterval = {\n  daily: \"days\",\n  weekly: \"weeks\",\n  monthly: \"months\",\n  yearly: \"years\",\n};\n\nconst timeLabelFormats = {\n  daily: \"MMMM D, YYYY\",\n  weekly: \"[Week of] MMM D, YYYY\",\n  monthly: \"MMMM YYYY\",\n  yearly: \"YYYY\",\n};\n\nconst defaultOptions = {\n  initialDate: null,\n  timeInterval: \"monthly\",\n  noValuePlaceholder: \"-\",\n  rawNumberOnHover: true,\n  displayAbsoluteValues: false,\n  initialIntervalNumber: 1,\n  maxColumns: Infinity,\n\n  title: null,\n  timeColumnTitle: \"Time\",\n  peopleColumnTitle: \"People\",\n  stageColumnTitle: \"{{ @ }}\",\n  numberFormat: \"0,0[.]00\",\n  percentFormat: \"0.00%\",\n  timeLabelFormat: timeLabelFormats.monthly,\n\n  colors: {\n    min: \"#ffffff\",\n    max: \"#041d66\",\n    steps: 7,\n  },\n};\n\nfunction prepareOptions(options: any) {\n  options = extend({}, defaultOptions, options, {\n    initialDate: moment(options.initialDate),\n    colors: extend({}, defaultOptions.colors, options.colors),\n  });\n\n  return extend(options, {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    timeLabelFormat: timeLabelFormats[options.timeInterval],\n    formatNumber: createNumberFormatter(options.numberFormat),\n    formatPercent: createNumberFormatter(options.percentFormat),\n    getColorForValue: chroma\n      .scale([options.colors.min, options.colors.max])\n      .mode(\"hsl\")\n      .domain([0, 100])\n      .classes(options.colors.steps),\n  });\n}\n\nfunction isLightColor(backgroundColor: any) {\n  backgroundColor = chroma(backgroundColor);\n  const white = \"#ffffff\";\n  const black = \"#000000\";\n  return chroma.contrast(backgroundColor, white) < chroma.contrast(backgroundColor, black);\n}\n\nfunction formatStageTitle(options: any, index: any) {\n  return formatSimpleTemplate(options.stageColumnTitle, { \"@\": options.initialIntervalNumber - 1 + index });\n}\n\nfunction formatTimeLabel(options: any, offset: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const interval = momentInterval[options.timeInterval];\n  return options.initialDate\n    .clone()\n    .add(offset, interval)\n    .format(options.timeLabelFormat);\n}\n\nfunction CorneliusHeader({ options, maxRowLength }: any) {\n  // eslint-disable-line react/prop-types\n  const cells = [];\n  for (let i = 1; i < maxRowLength; i += 1) {\n    cells.push(\n      <th key={`col${i}`} className=\"cornelius-stage\">\n        {formatStageTitle(options, i)}\n      </th>\n    );\n  }\n\n  return (\n    <tr>\n      <th className=\"cornelius-time\">{options.timeColumnTitle}</th>\n      <th className=\"cornelius-people\">{options.peopleColumnTitle}</th>\n      {cells}\n    </tr>\n  );\n}\n\nfunction CorneliusRow({ options, data, index, maxRowLength }: any) {\n  // eslint-disable-line react/prop-types\n  const baseValue = data[0] || 0;\n\n  const cells = [];\n  for (let i = 1; i < maxRowLength; i += 1) {\n    const value = data[i];\n    const percentageValue = isFinite(value / baseValue) ? (value / baseValue) * 100 : null;\n    const cellProps = { key: `col${i}` };\n\n    if (isNil(percentageValue)) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type '{ key... Remove this comment to see the full error message\n      cellProps.className = \"cornelius-empty\";\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message\n      cellProps.children = options.noValuePlaceholder;\n    } else {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type '{ key... Remove this comment to see the full error message\n      cellProps.className = options.displayAbsoluteValues ? \"cornelius-absolute\" : \"cornelius-percentage\";\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message\n      cellProps.children = options.displayAbsoluteValues\n        ? options.formatNumber(value)\n        : options.formatPercent(percentageValue);\n\n      const backgroundColor = options.getColorForValue(percentageValue);\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'style' does not exist on type '{ key: st... Remove this comment to see the full error message\n      cellProps.style = {\n        backgroundColor,\n        color: chooseTextColorForBackground(backgroundColor),\n      };\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'style' does not exist on type '{ key: st... Remove this comment to see the full error message\n      if (isLightColor(cellProps.style.color)) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type '{ key... Remove this comment to see the full error message\n        cellProps.className += \" cornelius-white-text\";\n      }\n\n      if (options.rawNumberOnHover && !options.displayAbsoluteValues) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message\n        cellProps.children = (\n          <Tooltip title={options.formatNumber(value)} mouseEnterDelay={0} mouseLeaveDelay={0}>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message */}\n            <div>{cellProps.children}</div>\n          </Tooltip>\n        );\n      }\n    }\n\n    cells.push(<td {...cellProps} />);\n  }\n\n  return (\n    <tr>\n      <td className=\"cornelius-label\">{formatTimeLabel(options, index)}</td>\n      <td className=\"cornelius-people\">{options.formatNumber(baseValue)}</td>\n      {cells}\n    </tr>\n  );\n}\n\ntype OwnCorneliusProps = {\n  data?: number[][];\n  options?: {\n    initialDate: any; // TODO: PropTypes.instanceOf(Date)\n    timeInterval?: \"daily\" | \"weekly\" | \"monthly\" | \"yearly\";\n    noValuePlaceholder?: string;\n    rawNumberOnHover?: boolean;\n    displayAbsoluteValues?: boolean;\n    initialIntervalNumber?: number;\n    maxColumns?: number;\n    title?: string;\n    timeColumnTitle?: string;\n    peopleColumnTitle?: string;\n    stageColumnTitle?: string;\n    numberFormat?: string;\n    percentFormat?: string;\n    timeLabelFormat?: string;\n    colors?: {\n      min?: string;\n      max?: string;\n      steps?: number;\n    };\n  };\n};\n\ntype CorneliusProps = OwnCorneliusProps & typeof Cornelius.defaultProps;\n\nexport default function Cornelius({ data, options }: CorneliusProps) {\n  options = useMemo(() => prepareOptions(options), [options]);\n\n  const maxRowLength = useMemo(\n    () =>\n      min([\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'length' does not exist on type 'number'.\n        max(map(data, d => d.length)) || 0,\n        // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n        options.maxColumns + 1, // each row includes totals, but `maxColumns` is only for stage columns\n      ]),\n    [data, options.maxColumns]\n  );\n\n  if (data.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"cornelius-container\">\n      {options.title && <div className=\"cornelius-title\">{options.title}</div>}\n\n      <table className=\"cornelius-table\">\n        <thead>\n          <CorneliusHeader options={options} maxRowLength={maxRowLength} />\n        </thead>\n        <tbody>\n          {map(data, (row, index) => (\n            <CorneliusRow key={`row${index}`} options={options} data={row} index={index} maxRowLength={maxRowLength} />\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nCornelius.defaultProps = {\n  data: [],\n  options: {},\n};\n"],"mappings":"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"}