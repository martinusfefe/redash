{"version":3,"file":"getOptions.js","names":["isFinite","map","merge","includes","DEFAULT_OPTIONS","stepCol","colName","displayAs","valueCol","autoSort","sortKeyCol","reverse","itemsLimit","percentValuesRange","min","max","numberFormat","percentFormat","getOptions","options","_ref","columns","availableColumns","c","name"],"sources":["../../../src/visualizations/funnel/getOptions.ts"],"sourcesContent":["import { isFinite, map, merge, includes } from \"lodash\";\n\nconst DEFAULT_OPTIONS = {\n  stepCol: { colName: null, displayAs: \"Steps\" },\n  valueCol: { colName: null, displayAs: \"Value\" },\n  autoSort: true,\n  sortKeyCol: { colName: null, reverse: false },\n  itemsLimit: 100,\n  percentValuesRange: { min: 0.01, max: 1000.0 },\n  numberFormat: \"0,0[.]00\",\n  percentFormat: \"0[.]00%\",\n};\n\nexport default function getOptions(options: any, { columns }: any) {\n  options = merge({}, DEFAULT_OPTIONS, options);\n\n  // Validate\n  const availableColumns = map(columns, c => c.name);\n  if (!includes(availableColumns, options.stepCol.colName)) {\n    options.stepCol.colName = null;\n  }\n  if (!includes(availableColumns, options.valueCol.colName)) {\n    options.valueCol.colName = null;\n  }\n  if (!includes(availableColumns, options.sortKeyCol.colName)) {\n    options.sortKeyCol.colName = null;\n  }\n\n  if (!isFinite(options.itemsLimit)) {\n    options.itemsLimit = DEFAULT_OPTIONS.itemsLimit;\n  }\n  if (options.itemsLimit < 2) {\n    options.itemsLimit = 2;\n  }\n\n  if (options.autoSort) {\n    options.sortKeyCol.colName = options.valueCol.colName;\n    options.sortKeyCol.reverse = true;\n  }\n\n  return options;\n}\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,QAAQ;AAEvD,IAAMC,eAAe,GAAG;EACtBC,OAAO,EAAE;IAAEC,OAAO,EAAE,IAAI;IAAEC,SAAS,EAAE;EAAQ,CAAC;EAC9CC,QAAQ,EAAE;IAAEF,OAAO,EAAE,IAAI;IAAEC,SAAS,EAAE;EAAQ,CAAC;EAC/CE,QAAQ,EAAE,IAAI;EACdC,UAAU,EAAE;IAAEJ,OAAO,EAAE,IAAI;IAAEK,OAAO,EAAE;EAAM,CAAC;EAC7CC,UAAU,EAAE,GAAG;EACfC,kBAAkB,EAAE;IAAEC,GAAG,EAAE,IAAI;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9CC,YAAY,EAAE,UAAU;EACxBC,aAAa,EAAE;AACjB,CAAC;AAED,eAAe,SAASC,UAAUA,CAACC,OAAY,EAAAC,IAAA,EAAoB;EAAA,IAAhBC,OAAO,GAAAD,IAAA,CAAPC,OAAO;EACxDF,OAAO,GAAGjB,KAAK,CAAC,CAAC,CAAC,EAAEE,eAAe,EAAEe,OAAO,CAAC;;EAE7C;EACA,IAAMG,gBAAgB,GAAGrB,GAAG,CAACoB,OAAO,EAAEE,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;EAClD,IAAI,CAACrB,QAAQ,CAACmB,gBAAgB,EAAEH,OAAO,CAACd,OAAO,CAACC,OAAO,CAAC,EAAE;IACxDa,OAAO,CAACd,OAAO,CAACC,OAAO,GAAG,IAAI;EAChC;EACA,IAAI,CAACH,QAAQ,CAACmB,gBAAgB,EAAEH,OAAO,CAACX,QAAQ,CAACF,OAAO,CAAC,EAAE;IACzDa,OAAO,CAACX,QAAQ,CAACF,OAAO,GAAG,IAAI;EACjC;EACA,IAAI,CAACH,QAAQ,CAACmB,gBAAgB,EAAEH,OAAO,CAACT,UAAU,CAACJ,OAAO,CAAC,EAAE;IAC3Da,OAAO,CAACT,UAAU,CAACJ,OAAO,GAAG,IAAI;EACnC;EAEA,IAAI,CAACN,QAAQ,CAACmB,OAAO,CAACP,UAAU,CAAC,EAAE;IACjCO,OAAO,CAACP,UAAU,GAAGR,eAAe,CAACQ,UAAU;EACjD;EACA,IAAIO,OAAO,CAACP,UAAU,GAAG,CAAC,EAAE;IAC1BO,OAAO,CAACP,UAAU,GAAG,CAAC;EACxB;EAEA,IAAIO,OAAO,CAACV,QAAQ,EAAE;IACpBU,OAAO,CAACT,UAAU,CAACJ,OAAO,GAAGa,OAAO,CAACX,QAAQ,CAACF,OAAO;IACrDa,OAAO,CAACT,UAAU,CAACC,OAAO,GAAG,IAAI;EACnC;EAEA,OAAOQ,OAAO;AAChB"}