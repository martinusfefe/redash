{"version":3,"file":"PieColorsSettings.js","names":["_lodash","require","_react","_interopRequireWildcard","_table","_interopRequireDefault","_ColorPicker","_propTypes","_ColorPalette","_getChartData","_editor","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","getUniqueValues","chartData","uniqueValuesNames","Set","each","series","data","row","add","x","PieColorsSettings","_ref","options","onOptionsChange","colors","useMemo","Automatic","AllColorPalettes","color_scheme","map","getChartData","rows","color","valuesOptions","updateValuesOption","useCallback","prop","columns","title","dataIndex","width","render","unused","item","createElement","concat","interactive","presetColors","placement","onChange","addonAfter","Label","Fragment","Section","Select","label","defaultValue","val","option","Option","showHeader","dataSource","pagination","propTypes","EditorPropTypes"],"sources":["../../../../src/visualizations/chart/Editor/PieColorsSettings.tsx"],"sourcesContent":["import { each, map } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport Table from \"antd/lib/table\";\nimport ColorPicker from \"@/components/ColorPicker\";\nimport { EditorPropTypes } from \"@/visualizations/prop-types\";\nimport { AllColorPalettes } from \"@/visualizations/ColorPalette\";\nimport getChartData from \"../getChartData\";\nimport { Section, Select } from \"@/components/visualizations/editor\";\n\nfunction getUniqueValues(chartData: any) {\n  const uniqueValuesNames = new Set();\n  each(chartData, series => {\n    each(series.data, row => {\n      uniqueValuesNames.add(row.x);\n    });\n  });\n  return [...uniqueValuesNames];\n}\n\nexport default function PieColorsSettings({ options, data, onOptionsChange }: any) {\n  const colors = useMemo(\n    () => ({\n      Automatic: null,\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      ...AllColorPalettes[options.color_scheme],\n    }),\n    [options.color_scheme]\n  );\n\n  const series = useMemo(\n    () =>\n      map(getUniqueValues(getChartData(data.rows, options)), value => ({\n        key: value,\n        // @ts-expect-error ts-migrate(2538) FIXME: Type 'unknown' cannot be used as an index type.\n        color: (options.valuesOptions[value] || {}).color || null,\n      })),\n    [options, data]\n  );\n\n  const updateValuesOption = useCallback(\n    (key, prop, value) => {\n      onOptionsChange({\n        valuesOptions: {\n          [key]: {\n            [prop]: value,\n          },\n        },\n      });\n    },\n    [onOptionsChange]\n  );\n\n  const columns = [\n    {\n      title: \"Values\",\n      dataIndex: \"key\",\n    },\n    {\n      title: \"Color\",\n      dataIndex: \"color\",\n      width: \"1%\",\n      render: (unused: any, item: any) => (\n        <ColorPicker\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test={`Chart.Series.${item.key}.Color`}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean' is not assignable to type 'never'.\n          interactive\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ \"Indian Red\": string; \"Green 2\": string; \"... Remove this comment to see the full error message\n          presetColors={colors}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          placement=\"topRight\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          color={item.color}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(value: any) => void' is not assignable to t... Remove this comment to see the full error message\n          onChange={(value: any) => updateValuesOption(item.key, \"color\", value)}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'never'.\n          addonAfter={<ColorPicker.Label color={item.color} presetColors={colors} />}\n        />\n      ),\n    },\n  ];\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n          <Select\n            label=\"Color Scheme\"\n            defaultValue={options.color_scheme}\n            data-test=\"ColorScheme\"\n            onChange={(val : any) => onOptionsChange({ color_scheme: val })}>\n            {Object.keys(AllColorPalettes).map(option => (\n             // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n              <Select.Option data-test={`ColorOption${option}`} key={option} value={option}>{option}</Select.Option>\n            ))}\n          </Select>\n        </Section>\n      <Table showHeader={false} dataSource={series} columns={columns} pagination={false} />\n    </React.Fragment>\n  )\n}\n\nPieColorsSettings.propTypes = EditorPropTypes;\n"],"mappings":"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"}