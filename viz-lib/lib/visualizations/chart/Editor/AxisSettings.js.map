{"version":3,"file":"AxisSettings.js","names":["_lodash","require","_react","_interopRequireDefault","_useDebounce","Grid","_interopRequireWildcard","_editor","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","isArray","toNumber","isNumber","parseFloat","isFinite","AxisSettings","_ref","id","options","features","onChange","optionsChanged","newOptions","merge","_useDebouncedCallback","useDebouncedCallback","text","title","isString","_useDebouncedCallback2","handleNameChange","_useDebouncedCallback3","opts","_useDebouncedCallback4","handleMinMaxChange","_useDebouncedCallback5","_useDebouncedCallback6","handleTickFormatChange","createElement","Fragment","Section","Select","label","concat","defaultValue","type","autoDetectType","Option","Input","isObject","event","target","ContextHelp","TickFormatSpecs","tickFormat","range","Row","gutter","align","Col","span","InputNumber","placeholder","rangeMin","rangeMax","defaultProps"],"sources":["../../../../src/visualizations/chart/Editor/AxisSettings.tsx"],"sourcesContent":["import { isString, isObject, isFinite, isNumber, merge } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport * as Grid from \"antd/lib/grid\";\nimport { Section, Select, Input, InputNumber, ContextHelp } from \"@/components/visualizations/editor\";\n\nfunction toNumber(value: any) {\n  value = isNumber(value) ? value : parseFloat(value);\n  return isFinite(value) ? value : null;\n}\n\ntype OwnProps = {\n  id: string;\n  options: {\n    type: string;\n    title?: {\n      text?: string;\n    };\n    rangeMin?: number;\n    rangeMax?: number;\n    tickFormat?: string;\n  };\n  features?: {\n    autoDetectType?: boolean;\n    range?: boolean;\n  };\n  onChange?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof AxisSettings.defaultProps;\n\nexport default function AxisSettings({ id, options, features, onChange }: Props) {\n  function optionsChanged(newOptions: any) {\n    onChange(merge({}, options, newOptions));\n  }\n\n  const [handleNameChange] = useDebouncedCallback(text => {\n    const title = isString(text) && text !== \"\" ? { text } : null;\n    optionsChanged({ title });\n  }, 200);\n\n  const [handleMinMaxChange] = useDebouncedCallback(opts => optionsChanged(opts), 200);\n\n  const [handleTickFormatChange] = useDebouncedCallback(opts => optionsChanged(opts), 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Scale\"\n          data-test={`Chart.${id}.Type`}\n          defaultValue={options.type}\n          onChange={(type: any) => optionsChanged({ type })}>\n          {features.autoDetectType && (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option value=\"-\" data-test={`Chart.${id}.Type.Auto`}>\n              Auto Detect\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          )}\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"datetime\" data-test={`Chart.${id}.Type.DateTime`}>\n            Datetime\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"linear\" data-test={`Chart.${id}.Type.Linear`}>\n            Linear\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"logarithmic\" data-test={`Chart.${id}.Type.Logarithmic`}>\n            Logarithmic\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"category\" data-test={`Chart.${id}.Type.Category`}>\n            Category\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Name\"\n          data-test={`Chart.${id}.Name`}\n          defaultValue={isObject(options.title) ? options.title.text : null}\n          onChange={(event: any) => handleNameChange(event.target.value)}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n              Tick Format\n              <ContextHelp.TickFormatSpecs />\n            </React.Fragment>\n          }\n          data-test={`Chart.${id}.TickFormat`}\n          defaultValue={options.tickFormat}\n          onChange={(event: any) => handleTickFormatChange({ tickFormat: event.target.value })}\n        />\n      </Section>\n\n      {features.range && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element[]; gutter: number; type:... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15} type=\"flex\" align=\"middle\">\n            <Grid.Col span={12}>\n              <InputNumber\n                label=\"Min Value\"\n                placeholder=\"Auto\"\n                data-test={`Chart.${id}.RangeMin`}\n                defaultValue={toNumber(options.rangeMin)}\n                onChange={(value: any) => handleMinMaxChange({ rangeMin: toNumber(value) })}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                label=\"Max Value\"\n                placeholder=\"Auto\"\n                data-test={`Chart.${id}.RangeMax`}\n                defaultValue={toNumber(options.rangeMax)}\n                onChange={(value: any) => handleMinMaxChange({ rangeMax: toNumber(value) })}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Section>\n      )}\n    </React.Fragment>\n  );\n}\n\nAxisSettings.defaultProps = {\n  features: {},\n  onChange: () => {},\n};\n"],"mappings":"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"}