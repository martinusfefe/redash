{"version":3,"file":"AxisSettings.js","names":["isString","isObject","isFinite","isNumber","merge","React","useDebouncedCallback","Grid","Section","Select","Input","InputNumber","ContextHelp","toNumber","value","parseFloat","AxisSettings","_ref","id","options","features","onChange","optionsChanged","newOptions","_useDebouncedCallback","text","title","_useDebouncedCallback2","_slicedToArray","handleNameChange","_useDebouncedCallback3","opts","_useDebouncedCallback4","handleMinMaxChange","_useDebouncedCallback5","_useDebouncedCallback6","handleTickFormatChange","createElement","Fragment","label","concat","defaultValue","type","autoDetectType","Option","event","target","TickFormatSpecs","tickFormat","range","Row","gutter","align","Col","span","placeholder","rangeMin","rangeMax","defaultProps"],"sources":["../../../../src/visualizations/chart/Editor/AxisSettings.tsx"],"sourcesContent":["import { isString, isObject, isFinite, isNumber, merge } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport * as Grid from \"antd/lib/grid\";\nimport { Section, Select, Input, InputNumber, ContextHelp } from \"@/components/visualizations/editor\";\n\nfunction toNumber(value: any) {\n  value = isNumber(value) ? value : parseFloat(value);\n  return isFinite(value) ? value : null;\n}\n\ntype OwnProps = {\n  id: string;\n  options: {\n    type: string;\n    title?: {\n      text?: string;\n    };\n    rangeMin?: number;\n    rangeMax?: number;\n    tickFormat?: string;\n  };\n  features?: {\n    autoDetectType?: boolean;\n    range?: boolean;\n  };\n  onChange?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof AxisSettings.defaultProps;\n\nexport default function AxisSettings({ id, options, features, onChange }: Props) {\n  function optionsChanged(newOptions: any) {\n    onChange(merge({}, options, newOptions));\n  }\n\n  const [handleNameChange] = useDebouncedCallback(text => {\n    const title = isString(text) && text !== \"\" ? { text } : null;\n    optionsChanged({ title });\n  }, 200);\n\n  const [handleMinMaxChange] = useDebouncedCallback(opts => optionsChanged(opts), 200);\n\n  const [handleTickFormatChange] = useDebouncedCallback(opts => optionsChanged(opts), 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Scale\"\n          data-test={`Chart.${id}.Type`}\n          defaultValue={options.type}\n          onChange={(type: any) => optionsChanged({ type })}>\n          {features.autoDetectType && (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option value=\"-\" data-test={`Chart.${id}.Type.Auto`}>\n              Auto Detect\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          )}\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"datetime\" data-test={`Chart.${id}.Type.DateTime`}>\n            Datetime\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"linear\" data-test={`Chart.${id}.Type.Linear`}>\n            Linear\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"logarithmic\" data-test={`Chart.${id}.Type.Logarithmic`}>\n            Logarithmic\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"category\" data-test={`Chart.${id}.Type.Category`}>\n            Category\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Name\"\n          data-test={`Chart.${id}.Name`}\n          defaultValue={isObject(options.title) ? options.title.text : null}\n          onChange={(event: any) => handleNameChange(event.target.value)}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n              Tick Format\n              <ContextHelp.TickFormatSpecs />\n            </React.Fragment>\n          }\n          data-test={`Chart.${id}.TickFormat`}\n          defaultValue={options.tickFormat}\n          onChange={(event: any) => handleTickFormatChange({ tickFormat: event.target.value })}\n        />\n      </Section>\n\n      {features.range && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element[]; gutter: number; type:... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15} type=\"flex\" align=\"middle\">\n            <Grid.Col span={12}>\n              <InputNumber\n                label=\"Min Value\"\n                placeholder=\"Auto\"\n                data-test={`Chart.${id}.RangeMin`}\n                defaultValue={toNumber(options.rangeMin)}\n                onChange={(value: any) => handleMinMaxChange({ rangeMin: toNumber(value) })}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                label=\"Max Value\"\n                placeholder=\"Auto\"\n                data-test={`Chart.${id}.RangeMax`}\n                defaultValue={toNumber(options.rangeMax)}\n                onChange={(value: any) => handleMinMaxChange({ rangeMax: toNumber(value) })}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Section>\n      )}\n    </React.Fragment>\n  );\n}\n\nAxisSettings.defaultProps = {\n  features: {},\n  onChange: () => {},\n};\n"],"mappings":"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"}