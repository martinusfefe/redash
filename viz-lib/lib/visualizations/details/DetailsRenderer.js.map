{"version":3,"file":"DetailsRenderer.js","names":["React","useState","map","mapValues","keyBy","moment","RendererPropTypes","visualizationsSettings","Descriptions","Pagination","renderValue","value","type","formats","date","dateFormat","datetime","dateTimeFormat","isMoment","format","DetailsRenderer","_ref","data","_useState","_useState2","_slicedToArray","page","setPage","rows","length","types","columns","column","name","row","createElement","className","size","bordered","key","Item","label","showSizeChanger","current","defaultPageSize","total","onChange","p","propTypes"],"sources":["../../../src/visualizations/details/DetailsRenderer.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { map, mapValues, keyBy } from \"lodash\";\nimport moment from \"moment\";\nimport { RendererPropTypes } from \"@/visualizations/prop-types\";\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\nimport Descriptions from \"antd/lib/descriptions\";\nimport Pagination from \"antd/lib/pagination\";\n\nimport \"./details.less\";\n\nfunction renderValue(value: any, type: any) {\n  const formats = {\n    date: visualizationsSettings.dateFormat,\n    datetime: visualizationsSettings.dateTimeFormat,\n  };\n\n  if (type === \"date\" || type === \"datetime\") {\n    if (moment.isMoment(value)) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      return value.format(formats[type]);\n    }\n  }\n\n  return \"\" + value;\n}\n\nexport default function DetailsRenderer({ data }: any) {\n  const [page, setPage] = useState(0);\n\n  if (!data || !data.rows || data.rows.length === 0) {\n    return null;\n  }\n\n  const types = mapValues(keyBy(data.columns, \"name\"), \"type\");\n\n  // We use columsn to maintain order of columns in the view.\n  const columns = data.columns.map((column: any) => column.name);\n  const row = data.rows[page];\n\n  return (\n    <div className=\"details-viz\">\n      <Descriptions size=\"small\" column={1} bordered>\n        {map(columns, key => (\n          <Descriptions.Item key={key} label={key}>\n            {renderValue(row[key], types[key])}\n          </Descriptions.Item>\n        ))}\n      </Descriptions>\n      {data.rows.length > 1 && (\n        <div className=\"paginator-container\">\n          <Pagination\n            showSizeChanger={false}\n            current={page + 1}\n            defaultPageSize={1}\n            total={data.rows.length}\n            onChange={p => setPage(p - 1)}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nDetailsRenderer.propTypes = RendererPropTypes;\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,GAAG,EAAEC,SAAS,EAAEC,KAAK,QAAQ,QAAQ;AAC9C,OAAOC,MAAM,MAAM,QAAQ;AAC3B,SAASC,iBAAiB;AAC1B,SAASC,sBAAsB;AAC/B,OAAOC,YAAY,MAAM,uBAAuB;AAChD,OAAOC,UAAU,MAAM,qBAAqB;AAE5C;AAEA,SAASC,WAAWA,CAACC,KAAU,EAAEC,IAAS,EAAE;EAC1C,IAAMC,OAAO,GAAG;IACdC,IAAI,EAAEP,sBAAsB,CAACQ,UAAU;IACvCC,QAAQ,EAAET,sBAAsB,CAACU;EACnC,CAAC;EAED,IAAIL,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,UAAU,EAAE;IAC1C,IAAIP,MAAM,CAACa,QAAQ,CAACP,KAAK,CAAC,EAAE;MAC1B;MACA,OAAOA,KAAK,CAACQ,MAAM,CAACN,OAAO,CAACD,IAAI,CAAC,CAAC;IACpC;EACF;EAEA,OAAO,EAAE,GAAGD,KAAK;AACnB;AAEA,eAAe,SAASS,eAAeA,CAAAC,IAAA,EAAgB;EAAA,IAAbC,IAAI,GAAAD,IAAA,CAAJC,IAAI;EAC5C,IAAAC,SAAA,GAAwBtB,QAAQ,CAAC,CAAC,CAAC;IAAAuB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA5BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EAEpB,IAAI,CAACF,IAAI,IAAI,CAACA,IAAI,CAACM,IAAI,IAAIN,IAAI,CAACM,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;IACjD,OAAO,IAAI;EACb;EAEA,IAAMC,KAAK,GAAG3B,SAAS,CAACC,KAAK,CAACkB,IAAI,CAACS,OAAO,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC;;EAE5D;EACA,IAAMA,OAAO,GAAGT,IAAI,CAACS,OAAO,CAAC7B,GAAG,CAAE8B,MAAW,IAAKA,MAAM,CAACC,IAAI,CAAC;EAC9D,IAAMC,GAAG,GAAGZ,IAAI,CAACM,IAAI,CAACF,IAAI,CAAC;EAE3B,oBACE1B,KAAA,CAAAmC,aAAA;IAAKC,SAAS,EAAC;EAAa,gBAC1BpC,KAAA,CAAAmC,aAAA,CAAC3B,YAAY;IAAC6B,IAAI,EAAC,OAAO;IAACL,MAAM,EAAE,CAAE;IAACM,QAAQ;EAAA,GAC3CpC,GAAG,CAAC6B,OAAO,EAAEQ,GAAG,iBACfvC,KAAA,CAAAmC,aAAA,CAAC3B,YAAY,CAACgC,IAAI;IAACD,GAAG,EAAEA,GAAI;IAACE,KAAK,EAAEF;EAAI,GACrC7B,WAAW,CAACwB,GAAG,CAACK,GAAG,CAAC,EAAET,KAAK,CAACS,GAAG,CAAC,CAChB,CACpB,CACW,CAAC,EACdjB,IAAI,CAACM,IAAI,CAACC,MAAM,GAAG,CAAC,iBACnB7B,KAAA,CAAAmC,aAAA;IAAKC,SAAS,EAAC;EAAqB,gBAClCpC,KAAA,CAAAmC,aAAA,CAAC1B,UAAU;IACTiC,eAAe,EAAE,KAAM;IACvBC,OAAO,EAAEjB,IAAI,GAAG,CAAE;IAClBkB,eAAe,EAAE,CAAE;IACnBC,KAAK,EAAEvB,IAAI,CAACM,IAAI,CAACC,MAAO;IACxBiB,QAAQ,EAAEC,CAAC,IAAIpB,OAAO,CAACoB,CAAC,GAAG,CAAC;EAAE,CAC/B,CACE,CAEJ,CAAC;AAEV;AAEA3B,eAAe,CAAC4B,SAAS,GAAG1C,iBAAiB"}