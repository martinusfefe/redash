{"version":3,"file":"DetailsRenderer.js","names":["_react","_interopRequireWildcard","require","_lodash","_moment","_interopRequireDefault","_propTypes","_visualizationsSettings","_descriptions","_pagination","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","isArray","renderValue","type","formats","date","visualizationsSettings","dateFormat","datetime","dateTimeFormat","moment","isMoment","format","DetailsRenderer","_ref","data","_useState","useState","_useState2","page","setPage","rows","types","mapValues","keyBy","columns","map","column","row","createElement","className","size","bordered","Item","label","showSizeChanger","current","defaultPageSize","total","onChange","p","propTypes","RendererPropTypes"],"sources":["../../../src/visualizations/details/DetailsRenderer.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { map, mapValues, keyBy } from \"lodash\";\nimport moment from \"moment\";\nimport { RendererPropTypes } from \"@/visualizations/prop-types\";\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\nimport Descriptions from \"antd/lib/descriptions\";\nimport Pagination from \"antd/lib/pagination\";\n\nimport \"./details.less\";\n\nfunction renderValue(value: any, type: any) {\n  const formats = {\n    date: visualizationsSettings.dateFormat,\n    datetime: visualizationsSettings.dateTimeFormat,\n  };\n\n  if (type === \"date\" || type === \"datetime\") {\n    if (moment.isMoment(value)) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      return value.format(formats[type]);\n    }\n  }\n\n  return \"\" + value;\n}\n\nexport default function DetailsRenderer({ data }: any) {\n  const [page, setPage] = useState(0);\n\n  if (!data || !data.rows || data.rows.length === 0) {\n    return null;\n  }\n\n  const types = mapValues(keyBy(data.columns, \"name\"), \"type\");\n\n  // We use columsn to maintain order of columns in the view.\n  const columns = data.columns.map((column: any) => column.name);\n  const row = data.rows[page];\n\n  return (\n    <div className=\"details-viz\">\n      <Descriptions size=\"small\" column={1} bordered>\n        {map(columns, key => (\n          <Descriptions.Item key={key} label={key}>\n            {renderValue(row[key], types[key])}\n          </Descriptions.Item>\n        ))}\n      </Descriptions>\n      {data.rows.length > 1 && (\n        <div className=\"paginator-container\">\n          <Pagination\n            showSizeChanger={false}\n            current={page + 1}\n            defaultPageSize={1}\n            total={data.rows.length}\n            onChange={p => setPage(p - 1)}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nDetailsRenderer.propTypes = RendererPropTypes;\n"],"mappings":"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"}